# AReaL架构文档更新索引

本次更新为AReaL项目的docs/architecture目录添加了完整的架构文档体系，详细说明了AReaLite和Core两个系统的设计架构。

## 新增文档列表

### 1. [AReaLite架构文档](arealite_architecture.md)
**功能**: 详细描述AReaLite系统的层次架构
- ✅ 高层功能层次视图（7层架构）
- ✅ 典型场景动态流程图（GRPO和SFT训练序列图）
- ✅ 各层详细展开（静态结构图+动态交互图）

### 2. [Core架构文档](core_architecture.md)  
**功能**: 详细描述Core系统的层次架构
- ✅ 高层功能层次视图（7层架构）
- ✅ 典型场景动态流程图（同步和异步PPO序列图）
- ✅ 各层详细展开（静态结构图+动态交互图）

### 3. [共享组件架构文档](shared_components.md)
**功能**: 分析AReaLite和Core之间的重叠部分
- ✅ 共享组件总览图
- ✅ 详细共享组件分析（数据结构、模型组件、工具函数、算法实现）
- ✅ 架构差异对比
- ✅ 共享组件设计模式

### 4. [架构图表总览](architecture_diagrams.md) - 已更新
**功能**: 可视化架构对比图表集合
- ✅ 整体架构对比图
- ✅ 详细层次架构对比图
- ✅ 代码复杂度对比图
- ✅ 共享组件关系图
- ✅ 数据流对比图
- ✅ 扩展性对比图
- ✅ 训练流程对比图
- ✅ 系统启动对比图
- ✅ 架构演进趋势图

## 文档特色

### 📊 全面的可视化
- 使用Mermaid图表展示复杂的系统架构
- 包含静态结构图和动态序列图
- 多维度对比分析图表

### 🔍 深度技术分析
- 7层架构详细展开
- 反向依赖和双向依赖说明
- 共享组件重用程度分析

### 🎯 实用性导向
- 典型使用场景的动态流程
- 具体代码示例和使用差异
- 架构选择建议

### 📋 中文文档
- 全部使用中文编写
- 符合中文技术文档规范
- 便于国内开发者理解

## 架构要点总结

### AReaLite特点
- **AI-Centric设计**: 3层抽象，面向算法研究者
- **直接对象操作**: Engine直接调用，简化数据流
- **单文件定制**: 用户可在单个脚本中实现完整训练逻辑
- **适用规模**: 1-64 GPU，中小规模实验

### Core特点  
- **System-Centric设计**: 6层抽象，面向大规模生产
- **Master-Worker架构**: 分布式调度和资源管理
- **MFC系统**: 复杂的模型函数调用机制
- **适用规模**: 64+ GPU，工业级大规模训练

### 共享组件
- **共享度**: 约25%的代码为共享实现
- **核心共享**: ReaLModel、Stats Tracker、PPO算法、数学验证
- **设计模式**: 适配器模式和策略模式

### 反向依赖说明
- **AReaLite**: 存在少量合理的反向依赖（IO Struct）
- **Core**: 存在显著的双向依赖（System-API, Impl-API）
- **设计权衡**: Core的双向依赖是分布式系统复杂性的体现

## 使用建议

### 文档阅读顺序
1. **快速了解**: 先阅读[架构图表总览](architecture_diagrams.md)
2. **深入理解**: 
   - 研究者关注[AReaLite架构文档](arealite_architecture.md)
   - 系统工程师关注[Core架构文档](core_architecture.md)
3. **代码复用**: 阅读[共享组件架构文档](shared_components.md)

### 技术选型参考
- **1-8 GPU**: 推荐AReaLite
- **8-64 GPU**: 根据团队能力选择
- **64+ GPU**: 推荐Core
- **研究导向**: AReaLite
- **生产导向**: Core

### 开发指导
- **新算法研究**: 使用AReaLite快速原型
- **大规模训练**: 使用Core系统
- **代码贡献**: 优先考虑共享组件的改进

这套文档为AReaL项目提供了完整的架构参考，有助于开发者理解系统设计，做出合适的技术选择，并为未来的架构演进提供指导。
